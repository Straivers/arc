statement = def ';'
          | expr '=' expr ';'
          | block
          | name ':' type? ('=' expr)? ';'                              # var
          ;

    def = 'def' name ':' ((type ('=' expr)?) | ('=' expr)) ;

    block = '{' statement* '}' ;

    if = 'if' expr block ('else' 'if' statement)* ('else' statement)? ;

    loop = 'loop' block ;

    escape = 'break' | 'continue' ;

    expr = primary | prefix | binary;

        primary = access
                | char
                | list
                | function
                | integer
                | name
                | path
                ;

            access = prefix '.' name ;

            list = list_open ','* (list_member ',')* list_close ;
                list_member = expr
                            | name ':' type
                            | name '=' expr
                            | name ':' type '=' expr
                            ;

            function = list '->' expr block? ;

            path = name ('::' name)* ;

        prefix = '-' primary
               | '!' primary
               | 'import' path
               | primary
               ;

        binary = expr op expr
               | expr expr
               ;

            op = '+'
               | '-'
               | '*'
               | '/'
               | '^'
               | '%'
               | '>'
               | '<'
               | '<='
               | '>='
               | '=='
               | '!='
               | 'and'
               | 'or'
               ;

type = access
     | list
     | function_type
     | name
     ;

    function_type = type_list '->' type ;
